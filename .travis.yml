os: linux
dist: bionic
language: java
jdk: openjdk11
jobs:
  include:
  - stage: Tests
    script: "./gradlew clean check"
  - stage: Build
    script: "./gradlew clean build"
  - stage: GitHub Release
    script: "./gradlew clean jar"
    deploy:
      provider: releases
      api_key: "$GITHUB_TOKEN"
      file: build/libs/pizzeria-0.0.1-SNAPSHOT.jar
      skip_cleanup: true
      on:
        branch: master
  - stage: Deploy Heroku
    deploy:
      provider: heroku
      api_key:
        secure: Fop2JCGPyWzbqO3Osy2HwWttTmkw/fNar409DbYqQxmFk/SoSX95pDn/+J1sjV5dmWGynykIKKrMmihDkscRR/uk9t+3Y25ZbmtYAkAlc55IhUzozjSlASzSC0URG22+5pkmheIaTRbXPQU8KspS9aHhWonpsNN16WBXmFI1KzmtUiOGLz3aFrB8r1JxQOL8EhSBJCTe9QbngR4X8G8R/5+aHB34lTvfJdpAfFP2A4GaZk+Z0jz79tQ7QlYBG9AypZTM4lENq3ZSaGrJkHiSKJ+pRxpFwV1CoTq9vFtEb1RJJBHK7bwJLx+HzAy18BUgF1uzAmxtC7Tq6UZ5kCYTOeO68d2X1JO/Dh6P/HNopplui6OnIsqMCM2JTckbMKs/a24PGj+VwRF5VxHcA8fnwnStBqGP+7x9S/r3nqdzfxEmDsAqDq5lKZsPVJhBwUJzGg4NpMyniREYEoXUZKugWCETxrsNkMZPyxF1Lt/XfoXqZsZSNlLg6A1+oVW6a4J7bwnrCtxXdc/hWrjsiMHnAIbJI75WpQsMdjlwjcQfj/rXxhij8+mA35DVwMgCAmCEmcDySrMAER3WYxs2kFeMNwMRcJzPhI5Z8IPhKAGYVpUzhPzrjXUOknKJbHbO011aGKESkqvsCjkfkmwFM5McDF8TZOKV8Ui+he2zwScToP8=
      app: Pizzeria-Backend
      on:
        branch: master
        repo: Burdzi0/Pizzeria-Backend
deploy:
  provider: heroku
  api_key:
    secure: QDejbr0HtKssTOKoLwOrX/CJsA/A62+8im9WpBrGnVj/L7fpULCv7gsIOFRSiDXvEZ+ybk55Ps6kJk3Bi+qZKxSBuQXxTC58QgneCB2lKPRQ9VtNLHfUBr2AXT/TFfyVSJvny1+5ject3RkKs1kQJQvhZ1ZOf5ZQmnRYbSbiUhyS86axuv/29PwtxbojeGGFWaxNCktN4hiJJYjtrEbJeTXlmVPC71g1EUnM0qNcu4ihunWUiW5x//RY6NDxIaPYtzIJLmVRmxncQF5+NfveU4+N7uSSb4CL3N2qloJjbg/+sbexiOR0ZzVGSuU+oTMiZlh9jNys9EBuQceesbS5r1miXSQ4x0LUFxgoKulRRj1TaV0x+t3QSvsusRXdwwel7S/Y+bcnaMMlAJ057TxZlmZZqW8p9B0ZTlN7YbTT/NEQEwD2x5ufRUzWqfEeKWB3sc2DrDWNjeBmvX7/7O5XHz/vluZociEZU78EJ4zSnmd3UZpDI3kUf7DQqUOfjtT93yax3phhQ0aPBUim93iUdDRrEiXG+XutpwhokaosL7n6/HSG9zEd59wMfADBizGfY5S3nKEqn+fJ7uU7l4faoVxYFW6Ur+lhl8GuINj5Vpuri+yB2Z0Z9i4JQ8OORXjxwpd/cvQ0YCaIJfGtcNRuNLs8DCGQgQf23+sFjzMv2HY=
  app: pizzeria-backend-zpi
  on:
    repo: Burdzi0/Pizzeria-Backend
